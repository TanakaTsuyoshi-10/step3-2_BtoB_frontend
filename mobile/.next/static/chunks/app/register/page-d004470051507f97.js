(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{867:(e,a,s)=>{"use strict";s.d(a,{O5:()=>t,R2:()=>n});let l=s(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",r=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(l).concat(e),r=localStorage.getItem("authToken"),n={headers:{"Content-Type":"application/json",...r&&{Authorization:"Bearer ".concat(r)},...a.headers},...a};try{let e=await fetch(s,n);if(!e.ok){let a,s=await e.text();try{a=JSON.parse(s)}catch(e){console.warn("Failed to parse error response as JSON:",e),a={error:"Network error"}}throw Error(a.error||"HTTP ".concat(e.status))}let a=await e.text();try{return JSON.parse(a)}catch(e){throw console.error("Failed to parse response as JSON:",e),console.error("Response text:",a),Error("Invalid JSON response from server")}}catch(e){throw console.error("API Error:",e),e}},n={login:e=>r("/auth/login",{method:"POST",body:JSON.stringify(e)}),register:e=>r("/auth/register",{method:"POST",body:JSON.stringify(e)}),getProfile:()=>r("/auth/profile"),updateProfile:e=>r("/auth/profile",{method:"PUT",body:JSON.stringify(e)})},t=e=>{localStorage.setItem("authToken",e)}},4088:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>d});var l=s(5155),r=s(2115),n=s(2619),t=s.n(n),c=s(63),o=s(2262),i=s(867);function d(){let e=(0,c.useRouter)(),[a,s]=(0,r.useState)("general"),[n,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[u,N]=(0,r.useState)({email:"",password:"",confirmPassword:"",companyCode:"",companyName:"",employeeId:"",userName:"",department:"",position:"",customerNumber:""}),b=e=>{N({...u,[e.target.name]:e.target.value}),m&&p("")},j=async s=>{if(s.preventDefault(),d(!0),p(""),x(""),!(u.password!==u.confirmPassword?(p("パスワードが一致しません"),!1):!(u.password.length<6)||(p("パスワードは6文字以上で入力してください"),!1)))return void d(!1);try{let s="tokyogas"===a?{customerNumber:u.customerNumber,password:u.password,userName:u.userName,registerType:"tokyogas"}:{email:u.email,password:u.password,companyCode:u.companyCode,companyName:u.companyName,employeeId:u.employeeId,userName:u.userName,department:u.department,position:u.position,registerType:"general"};await i.R2.register(s),x("アカウントが正常に作成されました。ログインページに移動します..."),setTimeout(()=>{e.push("/login")},2e3)}catch(e){p(e.message||"アカウント作成に失敗しました"),console.error("Register error:",e)}finally{d(!1)}};return(0,l.jsx)("div",{className:"min-h-screen bg-custom flex items-center justify-center p-4",children:(0,l.jsx)("div",{className:"card w-full max-w-lg bg-white shadow-2xl",children:(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsxs)("div",{className:"text-center mb-6",children:[(0,l.jsx)(t(),{href:"/",className:"text-2xl font-bold text-primary hover:text-primary/80",children:"Tech0 by scope3"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"アカウント作成"})]}),(0,l.jsxs)("div",{className:"tabs tabs-custom mb-6",children:[(0,l.jsx)("button",{className:"tab tab-sm sm:tab-lg flex-1 ".concat("general"===a?"tab-active":""),onClick:()=>s("general"),children:"一般登録"}),(0,l.jsxs)("button",{className:"tab tab-sm sm:tab-lg flex-1 ".concat("tokyogas"===a?"tab-active":""),onClick:()=>s("tokyogas"),children:[(0,l.jsx)("span",{className:"hidden sm:inline",children:"東京ガス連携"}),(0,l.jsx)("span",{className:"sm:hidden",children:"東京ガス"})]})]}),m&&(0,l.jsx)("div",{className:"alert alert-error mb-4",children:(0,l.jsx)("span",{children:m})}),h&&(0,l.jsx)("div",{className:"alert alert-success mb-4",children:(0,l.jsx)("span",{children:h})}),(0,l.jsxs)("form",{onSubmit:j,className:"space-y-4",children:["tokyogas"===a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("p",{className:"text-center text-primary font-medium text-sm",children:"東京ガス連携アカウント登録"})}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"東京ガスお客さま番号"})}),(0,l.jsx)("input",{type:"text",name:"customerNumber",placeholder:"お客さま番号を入力",className:"input input-bordered",value:u.customerNumber,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"会社コード"})}),(0,l.jsx)("input",{type:"text",name:"companyCode",placeholder:"会社コードを入力",className:"input input-bordered",value:u.companyCode,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"社員番号"})}),(0,l.jsx)("input",{type:"text",name:"employeeId",placeholder:"社員番号を入力",className:"input input-bordered",value:u.employeeId,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"メールアドレス"})}),(0,l.jsx)("input",{type:"email",name:"email",placeholder:"メールアドレスを入力",className:"input input-bordered",value:u.email,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"お名前"})}),(0,l.jsx)("input",{type:"text",name:"userName",placeholder:"お名前を入力",className:"input input-bordered",value:u.userName,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"部署"})}),(0,l.jsx)("input",{type:"text",name:"department",placeholder:"部署名",className:"input input-bordered",value:u.department,onChange:b})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"役職"})}),(0,l.jsx)("input",{type:"text",name:"position",placeholder:"役職名",className:"input input-bordered",value:u.position,onChange:b})]})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"パスワード"})}),(0,l.jsx)("input",{type:"password",name:"password",placeholder:"パスワードを入力（6文字以上）",className:"input input-bordered",value:u.password,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"パスワード確認"})}),(0,l.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"パスワードを再入力",className:"input input-bordered",value:u.confirmPassword,onChange:b,required:!0})]}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary w-full btn-md sm:btn-lg",disabled:n,children:n?(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.In,{icon:"carbon:connect",className:"text-lg"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"東京ガス連携で"}),"アカウント作成"]})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"会社コード"})}),(0,l.jsx)("input",{type:"text",name:"companyCode",placeholder:"会社コードを入力",className:"input input-bordered",value:u.companyCode,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"社員番号"})}),(0,l.jsx)("input",{type:"text",name:"employeeId",placeholder:"社員番号を入力",className:"input input-bordered",value:u.employeeId,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"お名前"})}),(0,l.jsx)("input",{type:"text",name:"userName",placeholder:"お名前を入力",className:"input input-bordered",value:u.userName,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"部署"})}),(0,l.jsx)("input",{type:"text",name:"department",placeholder:"部署名",className:"input input-bordered",value:u.department,onChange:b})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"役職"})}),(0,l.jsx)("input",{type:"text",name:"position",placeholder:"役職名",className:"input input-bordered",value:u.position,onChange:b})]})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"メールアドレス"})}),(0,l.jsx)("input",{type:"email",name:"email",placeholder:"メールアドレスを入力",className:"input input-bordered",value:u.email,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"パスワード"})}),(0,l.jsx)("input",{type:"password",name:"password",placeholder:"パスワードを入力（6文字以上）",className:"input input-bordered",value:u.password,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:"パスワード確認"})}),(0,l.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"パスワードを再入力",className:"input input-bordered",value:u.confirmPassword,onChange:b,required:!0})]}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary w-full btn-md sm:btn-lg",disabled:n,children:n?(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.In,{icon:"carbon:user-plus",className:"text-lg"}),"アカウント作成"]})})]}),(0,l.jsx)("div",{className:"text-center mt-6",children:(0,l.jsx)(t(),{href:"/login",className:"link link-primary",children:"すでにアカウントをお持ちの方はこちら"})})]})]})})})}},7204:(e,a,s)=>{Promise.resolve().then(s.bind(s,4088))}},e=>{e.O(0,[195,441,255,358],()=>e(e.s=7204)),_N_E=e.O()}]);